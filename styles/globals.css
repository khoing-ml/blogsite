@tailwind base;
@tailwind components;
@tailwind utilities;

/* KaTeX math rendering */
@import 'katex/dist/katex.min.css';

body {
  @apply bg-white dark:bg-neutral-950 text-neutral-900 dark:text-neutral-100 antialiased;
}

:root {
  --font-inter: 'Inter', ui-sans-serif, system-ui;
  --font-code: 'Fira Code', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  /* Grayscale palette (black / white / gray) */
  /* Using HSL: hue 0, saturation 0%, varying lightness */
  --accent: 0 0% 20%; /* dark gray for primary interactive elements */
  --accent-alt: 0 0% 40%; /* mid gray for gradient end */
  --accent-fg: 0 0% 100%; /* text on dark accent backgrounds */
  --accent-muted: 0 0% 88%; /* light gray background highlight */
}

html.dark :root, html.dark {
  /* Dark mode grayscale adjustments (invert lightness for contrast) */
  --accent: 0 0% 72%; /* light gray for primary on dark */
  --accent-alt: 0 0% 55%; /* slightly darker for gradient end */
  --accent-fg: 0 0% 8%; /* dark text when on light accent */
  --accent-muted: 0 0% 28%; /* muted dark gray background highlight */
}

/* Accent helpers */
.accent-gradient { background-image: linear-gradient(90deg, hsl(var(--accent)) 0%, hsl(var(--accent-alt)) 100%); }
.accent-text { background: linear-gradient(90deg, hsl(var(--accent)) 0%, hsl(var(--accent-alt)) 80%); -webkit-background-clip: text; background-clip: text; color: transparent; }
.accent-ring { box-shadow: 0 0 0 2px hsl(var(--accent)/0.4); }
.accent-hover:hover { color: hsl(var(--accent)); }

.prose a { text-decoration: none; font-weight: 500; }
.prose a:hover { text-decoration: none; }

/* Improve text wrapping & readability */
.prose { hyphens: auto; overflow-wrap: anywhere; word-break: normal; }
.prose p, .prose li { text-wrap: pretty; }
.prose code { word-wrap: break-word; }
.prose pre { white-space: pre; overflow-x: auto; }

/* Ensure KaTeX display math is centered even inside lists or paragraphs */
.prose .katex-display { margin-left: auto; margin-right: auto; }
.prose li .katex-display, .prose p .katex-display { margin-left: auto; margin-right: auto; }

a { color: hsl(var(--accent)); text-decoration: none; }
html.dark a { color: hsl(var(--accent)); }
a:hover { text-decoration: none; }

pre code { font-size: 0.875rem; line-height: 1.625; }
code, pre code, .prose code, .prose pre code { font-family: var(--font-code) !important; font-feature-settings: "liga" 1, "calt" 1; }
pre code { font-size: 0.8125rem; }

hr { margin: 2rem 0; border-color: #e5e7eb; } /* neutral-200 */
html.dark hr { border-color: #27272a; } /* neutral-800 */

blockquote { border-left: 4px solid rgba(0,0,0,0.1); padding-left: 1rem; font-style: italic; color: #52525b; }
html.dark blockquote { color: #d4d4d8; border-left-color: rgba(255,255,255,0.2); }

img { border-radius: 0.375rem; }

/* ---- Syntax highlighting (rehype-pretty-code) extras ---- */
pre code .line { display: block; min-width: 100%; }
pre code .line.highlighted { background: hsl(var(--accent)/0.12); box-shadow: inset 2px 0 0 hsl(var(--accent)); }
pre[data-language] { position: relative; }
pre[data-language]::before {
  content: attr(data-language);
  position: absolute;
  top: 6px;
  left: 10px;
  padding: 2px 6px;
  font-size: 10px;
  line-height: 1;
  border-radius: 4px;
  background: hsl(var(--accent)/0.15);
  color: hsl(var(--accent));
  font-weight: 500;
  letter-spacing: .05em;
  text-transform: uppercase;
}
/* Remove padding interference with lang badge by adding top padding offset */
pre[data-language] { padding-top: 2.25rem !important; }

/* Token fallback (if theme variables not applied for some reason) */
code span[style*="color:"] { color: inherit; }

